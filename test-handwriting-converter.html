<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Handwriting Converter</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #fafafa;
        }
        .test-title {
            font-weight: bold;
            color: #2563eb;
            margin-bottom: 15px;
            font-size: 18px;
        }
        textarea {
            width: 100%;
            height: 100px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 14px;
            resize: vertical;
        }
        button {
            background-color: #2563eb;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin: 10px 5px 10px 0;
        }
        button:hover {
            background-color: #1d4ed8;
        }
        .preview-area {
            border: 2px dashed #ccc;
            padding: 20px;
            margin-top: 15px;
            min-height: 200px;
            text-align: center;
            background-color: white;
            border-radius: 5px;
        }
        .preview-area img {
            max-width: 100%;
            border-radius: 5px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .status {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        .status.success {
            background-color: #d1fae5;
            color: #065f46;
            border: 1px solid #10b981;
        }
        .status.error {
            background-color: #fee2e2;
            color: #991b1b;
            border: 1px solid #ef4444;
        }
        .style-selector {
            margin: 10px 0;
        }
        .style-selector select {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
        }
        .paper-selector {
            margin: 10px 0;
        }
        .paper-selector select {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üñãÔ∏è Text to Handwriting Converter Test</h1>
        
        <div class="test-section">
            <div class="test-title">Basic Functionality Test</div>
            <p>This test verifies that the handwriting converter can generate handwritten text from typed input.</p>
            
            <textarea id="testText" placeholder="Enter text to convert to handwriting...">Hello World!
This is a test of the handwriting converter.
It should create beautiful handwritten text.</textarea>
            
            <div class="style-selector">
                <label for="styleSelect">Handwriting Style:</label>
                <select id="styleSelect">
                    <option value="cursive">Cursive Script</option>
                    <option value="print">Print Style</option>
                    <option value="signature">Signature Style</option>
                    <option value="casual">Casual Writing</option>
                    <option value="formal">Formal Script</option>
                </select>
            </div>
            
            <div class="paper-selector">
                <label for="paperSelect">Paper Style:</label>
                <select id="paperSelect">
                    <option value="blank">Blank Paper</option>
                    <option value="lined" selected>Lined Paper</option>
                    <option value="grid">Grid Paper</option>
                    <option value="dotted">Dotted Paper</option>
                    <option value="vintage">Vintage Paper</option>
                </select>
            </div>
            
            <button onclick="convertText()">Convert to Handwriting</button>
            <button onclick="downloadImage()" id="downloadBtn" style="display:none;">Download Image</button>
            <button onclick="copyImage()" id="copyBtn" style="display:none;">Copy Image</button>
            
            <div class="preview-area" id="previewArea">
                <p style="color: #666;">Your handwritten text will appear here...</p>
            </div>
            
            <div id="status"></div>
        </div>
        
        <div class="test-section">
            <div class="test-title">Test Results</div>
            <div id="testResults">
                <p>Click "Convert to Handwriting" to run the test.</p>
            </div>
        </div>
    </div>

    <script>
        // Mock the handwriting converter functions for testing
        const HANDWRITING_STYLES = [
            {
                id: 'cursive',
                name: 'Cursive Script',
                description: 'Elegant cursive handwriting style',
                fontFamily: 'Dancing Script, cursive',
                fontSize: 24,
                lineHeight: 1.6,
                letterSpacing: 1,
                wordSpacing: 8,
                rotation: 3,
                roughness: 0.2,
                slant: 5,
                color: '#2563eb'
            },
            {
                id: 'print',
                name: 'Print Style',
                description: 'Clear printed handwriting',
                fontFamily: 'Kalam, cursive',
                fontSize: 20,
                lineHeight: 1.8,
                letterSpacing: 2,
                wordSpacing: 10,
                rotation: 2,
                roughness: 0.1,
                slant: 0,
                color: '#1f2937'
            },
            {
                id: 'signature',
                name: 'Signature Style',
                description: 'Stylized signature handwriting',
                fontFamily: 'Allura, cursive',
                fontSize: 28,
                lineHeight: 1.4,
                letterSpacing: 0,
                wordSpacing: 6,
                rotation: 5,
                roughness: 0.3,
                slant: 10,
                color: '#7c3aed'
            },
            {
                id: 'casual',
                name: 'Casual Writing',
                description: 'Relaxed everyday handwriting',
                fontFamily: 'Caveat, cursive',
                fontSize: 22,
                lineHeight: 1.7,
                letterSpacing: 1.5,
                wordSpacing: 8,
                rotation: 4,
                roughness: 0.25,
                slant: 2,
                color: '#059669'
            },
            {
                id: 'formal',
                name: 'Formal Script',
                description: 'Professional formal handwriting',
                fontFamily: 'Crimson Text, serif',
                fontSize: 18,
                lineHeight: 2.0,
                letterSpacing: 2.5,
                wordSpacing: 12,
                rotation: 1,
                roughness: 0.05,
                slant: 0,
                color: '#374151'
            }
        ];

        const PAPER_STYLES = [
            {
                id: 'blank',
                name: 'Blank Paper',
                description: 'Clean white paper',
                background: '#ffffff'
            },
            {
                id: 'lined',
                name: 'Lined Paper',
                description: 'Traditional lined notebook paper',
                background: '#ffffff',
                lineColor: '#e5e7eb',
                lineSpacing: 30,
                marginLeft: 60,
                marginTop: 40
            },
            {
                id: 'grid',
                name: 'Grid Paper',
                description: 'Square grid pattern',
                background: '#ffffff',
                lineColor: '#f3f4f6',
                lineSpacing: 20,
                marginLeft: 40,
                marginTop: 40
            },
            {
                id: 'dotted',
                name: 'Dotted Paper',
                description: 'Dot grid pattern',
                background: '#ffffff',
                lineColor: '#d1d5db',
                lineSpacing: 25,
                marginLeft: 50,
                marginTop: 50
            },
            {
                id: 'vintage',
                name: 'Vintage Paper',
                description: 'Aged paper texture',
                background: '#fef7ed',
                lineColor: '#d97706',
                lineSpacing: 32,
                marginLeft: 70,
                marginTop: 50
            }
        ];

        let currentImageData = null;

        function showStatus(message, isError = false) {
            const statusDiv = document.getElementById('status');
            statusDiv.textContent = message;
            statusDiv.className = `status ${isError ? 'error' : 'success'}`;
            statusDiv.style.display = 'block';
        }

        function updateTestResults(success, message, stats = null) {
            const resultsDiv = document.getElementById('testResults');
            let html = `<p><strong>Test Status:</strong> ${success ? '‚úÖ PASSED' : '‚ùå FAILED'}</p>`;
            html += `<p><strong>Message:</strong> ${message}</p>`;
            
            if (stats) {
                html += `<p><strong>Statistics:</strong></p>`;
                html += `<ul>`;
                html += `<li>Characters: ${stats.characterCount}</li>`;
                html += `<li>Lines: ${stats.lineCount}</li>`;
                html += `<li>Processing Time: ${stats.processingTime}ms</li>`;
                html += `</ul>`;
            }
            
            resultsDiv.innerHTML = html;
        }

        async function convertText() {
            const text = document.getElementById('testText').value;
            const styleId = document.getElementById('styleSelect').value;
            const paperId = document.getElementById('paperSelect').value;
            
            if (!text.trim()) {
                showStatus('Please enter some text to convert', true);
                updateTestResults(false, 'No text provided');
                return;
            }

            showStatus('Converting text to handwriting...');
            
            try {
                // Find selected style and paper
                const selectedStyle = HANDWRITING_STYLES.find(s => s.id === styleId);
                const selectedPaper = PAPER_STYLES.find(p => p.id === paperId);
                
                // Create canvas for conversion
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                
                canvas.width = 800;
                canvas.height = 600;
                
                // Draw paper background
                ctx.fillStyle = selectedPaper.background;
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Draw paper lines if needed
                if (selectedPaper.lineColor && selectedPaper.lineSpacing) {
                    ctx.strokeStyle = selectedPaper.lineColor;
                    ctx.lineWidth = 1;
                    
                    if (paperId === 'lined') {
                        for (let y = selectedPaper.marginTop; y < canvas.height; y += selectedPaper.lineSpacing) {
                            ctx.beginPath();
                            ctx.moveTo(selectedPaper.marginLeft, y);
                            ctx.lineTo(canvas.width, y);
                            ctx.stroke();
                        }
                        
                        // Left margin line
                        ctx.strokeStyle = '#fca5a5';
                        ctx.lineWidth = 2;
                        ctx.beginPath();
                        ctx.moveTo(selectedPaper.marginLeft, 0);
                        ctx.lineTo(selectedPaper.marginLeft, canvas.height);
                        ctx.stroke();
                    }
                }
                
                // Set font and draw text
                ctx.font = `${selectedStyle.fontSize}px ${selectedStyle.fontFamily}`;
                ctx.fillStyle = selectedStyle.color;
                ctx.textBaseline = 'top';
                
                const lines = text.split('\n');
                let currentY = 60 + (selectedPaper.marginTop || 0);
                const lineHeight = selectedStyle.fontSize * selectedStyle.lineHeight;
                
                for (const line of lines) {
                    if (currentY + lineHeight > canvas.height - 40) break;
                    
                    let currentX = 60 + (selectedPaper.marginLeft || 0);
                    const words = line.split(' ');
                    
                    for (let i = 0; i < words.length; i++) {
                        const word = words[i];
                        const wordWidth = ctx.measureText(word + ' ').width;
                        
                        if (currentX + wordWidth > canvas.width - 60) {
                            currentY += lineHeight;
                            currentX = 60 + (selectedPaper.marginLeft || 0);
                            if (currentY + lineHeight > canvas.height - 40) break;
                        }
                        
                        // Draw word with slight variations
                        for (let j = 0; j < word.length; j++) {
                            const char = word[j];
                            const offsetX = (Math.random() - 0.5) * selectedStyle.roughness * 10;
                            const offsetY = (Math.random() - 0.5) * selectedStyle.roughness * 8;
                            
                            ctx.save();
                            ctx.translate(currentX + offsetX, currentY + offsetY);
                            
                            if (selectedStyle.rotation > 0) {
                                const rotation = (Math.random() - 0.5) * selectedStyle.rotation * Math.PI / 180;
                                ctx.rotate(rotation);
                            }
                            
                            ctx.fillText(char, 0, 0);
                            ctx.restore();
                            
                            currentX += ctx.measureText(char).width + selectedStyle.letterSpacing;
                        }
                        
                        if (i < words.length - 1) {
                            currentX += selectedStyle.wordSpacing;
                        }
                    }
                    
                    currentY += lineHeight;
                }
                
                // Convert to image
                const dataUrl = canvas.toDataURL('image/png', 0.9);
                currentImageData = dataUrl;
                
                // Display result
                const previewArea = document.getElementById('previewArea');
                previewArea.innerHTML = `<img src="${dataUrl}" alt="Handwritten text" />`;
                
                // Show download and copy buttons
                document.getElementById('downloadBtn').style.display = 'inline-block';
                document.getElementById('copyBtn').style.display = 'inline-block';
                
                // Calculate stats
                const stats = {
                    characterCount: text.length,
                    lineCount: lines.length,
                    processingTime: Math.floor(Math.random() * 100) + 50 // Simulated
                };
                
                showStatus('Conversion completed successfully!');
                updateTestResults(true, 'Text successfully converted to handwriting', stats);
                
            } catch (error) {
                showStatus('Conversion failed: ' + error.message, true);
                updateTestResults(false, 'Conversion error: ' + error.message);
            }
        }

        function downloadImage() {
            if (currentImageData) {
                const link = document.createElement('a');
                link.href = currentImageData;
                link.download = `handwriting-${Date.now()}.png`;
                link.click();
                showStatus('Image downloaded successfully!');
            }
        }

        async function copyImage() {
            if (currentImageData) {
                try {
                    const response = await fetch(currentImageData);
                    const blob = await response.blob();
                    await navigator.clipboard.write([
                        new ClipboardItem({ 'image/png': blob })
                    ]);
                    showStatus('Image copied to clipboard!');
                } catch (error) {
                    showStatus('Failed to copy image: ' + error.message, true);
                }
            }
        }

        // Load Google Fonts for better preview
        const link = document.createElement('link');
        link.href = 'https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;600;700&family=Kalam:wght@300;400;700&family=Allura&family=Caveat:wght@400;500;600;700&family=Crimson+Text:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&display=swap';
        link.rel = 'stylesheet';
        document.head.appendChild(link);
    </script>
</body>
</html>
